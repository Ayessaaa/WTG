<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>WTG?</title>
    <meta name="description" content="The HTML5 Herald" />
    <meta name="author" content="kokaneka" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
  </head>

  <style>
    .poppins {
      font-family: poppins;
    }
    .patrick {
      font-family: "Patrick Hand";
    }
    #myChart {
      max-width: 110px;
      max-height: 110px;
      animation: mymove 5s linear infinite;
    }
    #myDIV {
      margin: auto;
      border: 1px solid black;
      width: 200px;
      height: 100px;
      background-color: coral;
      color: white;
    }

    @keyframes mymove {
      100% {
        transform: rotate(360deg);
      }
    }
  </style>

  <body>
    <div id="place-app"></div>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script
      src="https://unpkg.com/react@16/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script type="text/babel">
      function App() {
        const [isHome, setIsHome] = React.useState(true);
        const [placesWheel, setPlacesWheel] = React.useState([1, 1, 1, 1, 1]);

        function handleCreateWheel() {
          setIsHome(false);
          setPlacesWheel([]);
        }

        function handleAddPlace(){
          setPlacesWheel([...placesWheel, 1]);
        }

        return (
          <div>
            <div className="h-80 absolute -bottom-30 -left-10 md:w-120 w-screen bg-[#84B5D8]/40 rounded-full blur-3xl z-0"></div>
            <Logo />
            {isHome ? (
              <div>
                <Description />
                <Button onClick={handleCreateWheel} />
              </div>
            ) : (
              <Button onClick={handleAddPlace}/>
              )}
              <Wheel placesWheel={placesWheel} isHome={isHome} />{" "}
          </div>
        );
      }

      function Logo() {
        return (
          <img
            className="w-90 mx-auto mt-10 z-10 animate__fadeIn animate__animated "
            src="https://hc-cdn.hel1.your-objectstorage.com/s/v3/c4a474afb8f10104333e53ee887e00a2574bf001_logo.png"
            alt=""
          />
        );
      }

      function Description() {
        return (
          <div className=" animate__fadeIn animate__animated animate__delay-1s animate__slow border-3 py-5 px-8 border-[#81ACED]/60 bg-[#84B5D8]/10  shadow-lg shadow-[#81ACED]/30 w-200 mx-auto rounded-lg mt-10">
            <p className="patrick text-[#507AB9] text-2xl underline decoration-[#81ACED] decoration-wavy">
              What is this?
            </p>
            <p className="text-xl text-[#84B5D8] patrick mt-5 mx-5">
              WTG (where to go) is a random picker for places to hangout with
              friends if you've got{" "}
              <span className="text-[#507AB9]">undecisive friends</span>.
              Basically everyone will put on places they consider going and the
              wheel will randomly select one (if the group can't).
              <br />
              <br />
              Additionally, the wheel would not show the place each person added
              so that no one would be blamed if the place they went to sucked ;D
              This takes the pressure off suggesting places!
            </p>
            <p className="patrick text-[#507AB9] text-2xl underline mt-5 decoration-[#81ACED] decoration-wavy">
              How it Works?
            </p>
            <ul className="text-xl text-[#84B5D8] patrick mt-5 mx-5">
              <li>
                1. Make everyone put a place (or more) they want to hangout
              </li>
              <li>2. Don't let anyone see what anyone puts in the wheel</li>
              <li>4. You can now spin the wheel</li>
              <li>5. The wheel will randomly select a place</li>
              <li>
                6.You can respin the wheel if the group doesn't want the place
              </li>
            </ul>
          </div>
        );
      }

      function Button({ onClick }) {
        return (
          <button
            onClick={onClick}
            className="animate__fadeIn animate__animated animate__delay-2s flex gap-2.5 items-center bg-gradient-to-t mx-auto w-fit shadow-lg shadow-[#81ACED]/40 from-[#81ACED] to-[#507AB9] poppins font-bold tracking-wide text-white px-5 py-2 text-xl mt-10 rounded-full hover:scale-105 transition-all hover:-translate-y-1 hover:shadow-xl hover:shadow-[#81ACED]/50 cursor-pointer"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              strokeWidth={1.5}
              stroke="currentColor"
              className="size-5 stroke-4"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                d="M12 4.5v15m7.5-7.5h-15"
              />
            </svg>
            Create a Wheel
          </button>
        );
      }

      function Wheel({ placesWheel, isHome }) {
        React.useEffect(() => {
          const canvas = document.getElementById("myChart");
          if (!canvas) return; 

          if (window.myChart instanceof Chart) {
            window.myChart.destroy();
            console.log("destroy")
          }

          if (isHome) {
            const ctx = canvas.getContext("2d");

            window.myChart = new Chart(ctx, {
              type: "pie",
              data: {
                datasets: [
                  {
                    data: placesWheel,
                    backgroundColor: [
                      "#507AB9",
                      "#81ACED",
                      "#84B5D8",
                      "#A9D5F4",
                      "#CAE5F9",
                    ],
                    borderWidth: 1,
                  },
                ],
              },
              options: {
                events: [],
              },
            });
          } else if (!isHome && placesWheel.length > 0 && canvas) {
            console.log("else")
            const ctx = canvas.getContext("2d");

            window.myChart = new Chart(ctx, {
              type: "pie",
              data: {
                datasets: [
                  {
                    data: placesWheel,
                    backgroundColor: [
                      "#507AB9",
                      "#81ACED",
                      "#84B5D8",
                      "#A9D5F4",
                      "#CAE5F9",
                    ],
                    borderWidth: 1,
                  },
                ],
              },
              options: {
                events: [], 
              },
            });
          }
        }, [placesWheel, isHome]);

        return <div></div>;
      }

      ReactDOM.render(<App />, document.getElementById("place-app"));
      // ReactDOM.render(Button(), document.getElementById("place"));
    </script>
    <div
      class="animate__fadeIn animate__animated animate__delay-3s animate__slow"
    >
      <canvas id="myChart" class="z-10 mx-auto mt-5"></canvas>
    </div>
  </body>
</html>
